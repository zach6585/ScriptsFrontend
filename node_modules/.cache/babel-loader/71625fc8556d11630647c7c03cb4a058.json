{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/moust/Documents/Scripts/frontend/src/components/users/login.js\";\nimport { Component } from \"react\";\nimport axios from 'axios';\nimport './users.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const user = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      axios.post('http://localhost:3001/login', {\n        user\n      }, {\n        withCredentials: true\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.logged_in) {\n          this.props.handleLogin(response.data);\n          this.redirect();\n        } else {\n          this.setState({\n            errors: response.data.errors\n          });\n        }\n      }).catch(error => console.log('api errors:', error));\n    };\n\n    this.redirect = () => {\n      this.props.history.push('/');\n    };\n\n    this.handleErrors = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: this.state.errors.map(error => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: error\n            }, error, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 20\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this);\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      errors: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"userDiv\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"formDiv\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"loginForm\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Username: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"text\",\n              id: \"username\",\n              name: \"username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Password: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"text\",\n              id: \"password\",\n              name: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"submit\",\n            value: \"Submit\",\n            type: \"submit\",\n            id: \"submit\",\n            onClick: event => this.handleSubmit(event)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/mnt/c/Users/moust/Documents/Scripts/frontend/src/components/users/login.js"],"names":["Component","axios","Login","constructor","props","handleChange","event","name","value","target","setState","handleSubmit","preventDefault","user","username","state","password","post","withCredentials","then","response","console","log","data","logged_in","handleLogin","redirect","errors","catch","error","history","push","handleErrors","map","render"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport axios from 'axios';\r\n\r\nimport './users.css'\r\n\r\nclass Login extends Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n          username: '',\r\n          password: '',\r\n          errors: ''\r\n         };\r\n      }\r\n    handleChange = (event) => {\r\n        const {name, value} = event.target\r\n        this.setState({\r\n          [name]: value\r\n        })\r\n      };\r\n      handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        const user = {\r\n          username: this.state.username,\r\n          password: this.state.password\r\n        }\r\n        \r\n    axios.post('http://localhost:3001/login', {user}, {withCredentials: true})\r\n        .then(response => {\r\n          console.log(response)\r\n          if (response.data.logged_in) {\r\n            this.props.handleLogin(response.data)\r\n            this.redirect()\r\n          } else {\r\n            this.setState({\r\n              errors: response.data.errors\r\n            })\r\n          }\r\n        })\r\n        .catch(error => console.log('api errors:', error))\r\n      };\r\n    redirect = () => {\r\n        this.props.history.push('/')\r\n      }\r\n    handleErrors = () => {\r\n        return (\r\n          <div>\r\n            <ul>\r\n            {this.state.errors.map(error => {\r\n            return <li key={error}>{error}</li>\r\n              })}\r\n            </ul>\r\n          </div>\r\n        )\r\n      };\r\n\r\n    render(){\r\n        return(\r\n            <div id=\"userDiv\">\r\n                <h1 className=\"center\">Login</h1>\r\n                <div id=\"formDiv\">\r\n                    <form id=\"loginForm\">\r\n                        <h2>Username: <input type=\"text\" className=\"text\" id=\"username\" name=\"username\"></input></h2>\r\n                        <br/>\r\n                        <h2>Password: <input type=\"password\" className=\"text\" id=\"password\" name=\"password\"></input></h2>\r\n                        <input name=\"submit\" value=\"Submit\" type=\"submit\" id=\"submit\" onClick={event => this.handleSubmit(event)}></input>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}